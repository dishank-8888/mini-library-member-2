<!-- Book Panel -->
<div class="panel">
    <h2>Books</h2>
    <input type="text" id="bookTitle" placeholder="Book title">
<input type="text" id="bookAuthor" placeholder="Author">
<button onclick="addBook()">Add Book</button>
    <ul id="bookList"></ul>
</div>
<script>
    // Define addBook in the global scope
    async function addBook() {
        const title = document.getElementById('bookTitle').value;
        const author = document.getElementById('bookAuthor').value;
        await fetch('/books', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({title, author})
        });
        fetchBooks(); // Refresh the book list
    }

    // Fetch and display the list of books
    async function fetchBooks() {
        const res = await fetch('/books');
        const books = await res.json();
        const bookList = document.getElementById('bookList');
        bookList.innerHTML = '';
        books.forEach(b => {
            bookList.innerHTML += <li>${b.title} by ${b.author} ${b.available !== undefined ? (b.available ? '(Available)' : '(Borrowed)') : ''}</li>;
        });
    }

    // Initial fetch of books when the page loads
    fetchBooks();
</script>