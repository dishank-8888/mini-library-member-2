<!-- Book Panel -->
<div class="panel">
    <h2>Books</h2>
    <input type="text" id="bookTitle" placeholder="Book title">
<input type="text" id="bookAuthor" placeholder="Author">
<button onclick="addBook()">Add Book</button>
    <ul id="bookList"></ul>
</div>
<script>
    async function fetchBooks() {
    const res = await fetch('/books');
    const books = await res.json();
    const bookList = document.getElementById('bookList');
    bookList.innerHTML = '';
    async function addBook() {
    const title = document.getElementById('bookTitle').value;
   async function addBook() {
    const title = document.getElementById('bookTitle').value;
    const author = document.getElementById('bookAuthor').value;
    const res = await fetch('/books', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({title, author})
    });
    if (!res.ok) {
        const error = await res.json();
        alert(error.error || 'Failed to add book');
        return;
    }
    fetchBooks();
}
}
    books.forEach(b => {
        bookList.innerHTML += <li>${b.title}</li>;
    });
    async function addBook() {
    const title = document.getElementById('bookTitle').value;
    const author = document.getElementById('bookAuthor').value;
    await fetch('/books', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({title, author})
    });
    fetchBooks();
}
</script>